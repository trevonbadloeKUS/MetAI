<!DOCTYPE html>
<html lang="en" data-dark="false">
  {% include head.html %}
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

  <body>
    {% include header.html %}
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel/slick/slick.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel/slick/slick-theme.css"/>

    <main>
      {% include content.html content=content %}
    </main>
    {% include footer.html %}

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel/slick/slick.min.js"></script>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <!-- Include map script conditionally -->
    {% if page.show_map %}
      <script>

      // Initialize the map
      var map = L.map('map').setView([20.0, 0.0], 2); // Centered on the world map

      // Add the tile layer (map layer)
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 18,
        attribution: 'Â© OpenStreetMap contributors'
      }).addTo(map);

      // Add the locations from the YAML data
      var locations = {{ site.data.talks | jsonify }};

      locations.forEach(function(location) {
        var marker = L.marker([location.latitude, location.longitude]).addTo(map);

        // Add a popup with information from the YAML file
        marker.bindPopup("<b>" + location.title + "</b><br>" +
                        location.location + "<br>" +
                        location.date + "<br>" +
                        location.description);
      });
      </script>
    {% endif %} 


  </body>
</html>

